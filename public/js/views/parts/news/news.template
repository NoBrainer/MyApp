<script type="text/template" id="news-template">
	<div class="panel-heading">
		<h3>
			News
			<ul class="nav nav-pills panel_right admin_controls" style="display:none;">
				<li>
					<a id="edit_news">Edit</a>
				</li>
			</ul>
		</h3>
	</div>
	<div class="panel-body">
		<ul class="media-list">
			<% _.each(news, function(item){ %>
				<%
					var title = item.title || "Undefined_Title";
					var body = item.body || "Undefined_Body";
					
					// Determine the date to display
					var postedDateStr = app.util.Date.toString(item.postedDate);
					
					// Truncate the body if necessary
					var maxLength = 200;
					var hasTruncatedForm = (body.length > maxLength);
					if(hasTruncatedForm){
						var truncatedBody = "BODY... [MORE]".replace("BODY", body.substring(0, maxLength));
					}
				%>
				<li class="media">
					<!--
						<a class="pull-left">
							<img alt="64x64" data-src="holder.js/64x64" class="media-object" style="width: 64px; height: 64px;" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2NCIgaGVpZ2h0PSI2NCI+PHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjZWVlIi8+PHRleHQgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iMzIiIHk9IjMyIiBzdHlsZT0iZmlsbDojYWFhO2ZvbnQtd2VpZ2h0OmJvbGQ7Zm9udC1zaXplOjEycHg7Zm9udC1mYW1pbHk6QXJpYWwsSGVsdmV0aWNhLHNhbnMtc2VyaWY7ZG9taW5hbnQtYmFzZWxpbmU6Y2VudHJhbCI+NjR4NjQ8L3RleHQ+PC9zdmc+">
						</a>
					-->
					<div class="media-body">
						<h4 class="media-heading">
							<%= title %>
							<span class="news_posted">
								(Posted: <%= postedDateStr %>)
							</span>
						</h4>
						<% if(hasTruncatedForm){ %>
							<p class="news_toggle">
								<%= truncatedBody %>
							</p>
							<p class="news_toggle" style="display:none;">
								<%= body %>
							</p>
						<% }else{ %>
							<p>
								<%= body %>
							</p>
						<% } %>
					</div>
				</li>
			<% }); %>
		</ul>
	</div>
</script>
